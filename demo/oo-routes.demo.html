<meta charset="utf-8">

<script src="../../webcomponentsjs/webcomponents-loader.js"></script>
<link rel="import" href="../../polymer/lib/elements/dom-bind.html">
<link rel="import" href="../../app-route/app-location.html">
<link rel="import" href="../../iron-pages/iron-pages.html">
<link rel="import" href="../oo-route.html">
<link rel="import" href="../oo-routes.html">

<dom-bind>
  <template>
    <app-location route="{{route}}" use-hash-as-path></app-location>

    <oo-routes
        route="[[route.path]]"
        attr-for-selected="name"
        selected="{{routeName}}"
        params="{{routeParams}}">
      <!-- <oo-route name="one" use-regexp pattern="/one"></oo-route> -->
      <!-- <oo-route name="two" use-regexp pattern="/two"></oo-route> -->
      <!-- <oo-route name="three" use-regexp pattern="/three/(.+)" map-query-to-params></oo-route> -->
      <oo-route name="one" pattern="/one"></oo-route>
      <oo-route name="two" pattern="/two"></oo-route>
      <oo-route name="three" pattern="/three/:param" map-query-to-params></oo-route>
    </oo-routes>

    <div>
      <a href="#/one">one</a>
      <a href="#/two">two</a>
      <a href="#/three/arg?key=val">three</a>
      <a href="#/none">none</a>
    </div>

    <br>

    <iron-pages
        attr-for-selected="name"
        selected="[[routeName]]">
      <div name="one">one</div>
      <div name="two">two</div>
      <div name="three">three</div>
    </iron-pages>

  </template>

  <script>

    window.addEventListener("WebComponentsReady", () => {
      const domBind = document.querySelector("dom-bind")
      const location = document.querySelector("app-location")
      const routes = document.querySelector("oo-routes")

      location.addEventListener("route-changed", () => {
        console.log("---")
        console.log("location.route", location.route)
      })

      routes.addEventListener("selected-changed", () => {
        console.log("routes.selected", routes.selected)
        console.log("routes.route", routes.route)
        console.log("routes.params", routes.params)
        // console.log("---")
        // console.log("domBind.routeName", domBind.routeName)
        // console.log("domBind.routeParams", domBind.routeParams)
      })

      // console.log("one path:", routes._pathForRoute("one", { a: "b", c: "d" }))
      // console.log("two path:", routes._pathForRoute("two", { a: "b", c: "d" }))
      // console.log("three path:", routes._pathForRoute("three", { a: "b", c: "d", param: "arg" }))
      // console.log("none path:", routes._pathForRoute("none", { a: "b", c: "d" }))
    })

  </script>
</dom-bind>
